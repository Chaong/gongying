{% extends "learning_logs/base.html" %}
{% load humanize %}

{% block page_header %}
    <h2>{{ topic }}</h2>
    <div class="lead">{{ topic.description }}</div>
    <small class="text-muted">{{ topic.owner }} · {{ topic.date_added | naturaltime  }}</small>
    {% if user.is_authenticated and topic.owner == user %}
        <div class="text-right">
            <a href="{% url 'learning_logs:edit_topic' topic.id %}" class="btn btn-outline-primary">编辑主题</a>
            <a href="{% url 'learning_logs:new_card' topic.id %}" class="btn btn-primary">添加卡片</a>
        </div>
    {% endif %}
{% endblock page_header %}

{% block content %}
    {% for card in cards %}
        <div class="card mb-3">
            <div class="card-header">
                <strong>{{ card.title }}</strong>
                <small class="text-muted">{{ card.date_added | naturaltime }}</small>
            </div>
            <div class="card-body">
                {{ card.content | linebreaksbr }}
                {% if user.is_authenticated and topic.owner == user %}
                    <div class="mt-3">
                        <a href="{% url 'learning_logs:edit_card' card.id %}" class="btn btn-outline-primary">编辑卡片</a>
                    </div>
                {% endif %}
            </div>
        </div>
    {% empty %}
        <p>这个主题还没有卡片哦 ~</p>
    {% endfor %}
{% endblock content %}